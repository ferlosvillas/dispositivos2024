import random

nivel = 1
victorias = 0
vidas = 3
monedas = 0
binoculares = 0
saltos = 0  # Nuevo objeto: cantidad de saltos disponibles

print("Â¡Bienvenido al juego de los pozos misteriosos con tienda y objetos especiales! ğŸ›’")

print("Puedes comprar vidas por 100 monedas, binoculares por 150 monedas y salto de nivel por 300 monedas (desbloqueado en nivel 5).")

while True:
    # Verificar si el jugador tiene 0 vidas
    if vidas == 0:
        print("\nğŸ’€ Te quedaste sin vidas.")
        if monedas >= 100:
            print(f"Tienes {monedas} monedas.")
            opcion = input("Â¿Quieres comprar una vida por 100 monedas? (sÃ­ / no): ")
            if opcion.lower() == "sÃ­":
                monedas -= 100
                vidas = 1
                print("â¤ï¸ Compraste una vida. Â¡Sigue jugando!")
            else:
                break
        else:
            print("No tienes suficientes monedas para comprar una vida.")
            break

    print(f"\n--- Nivel {nivel} ---")
    cantidad_de_pozos = nivel + 1
    pozo_seguro = random.randint(1, cantidad_de_pozos)

    print(f"Hay {cantidad_de_pozos} pozos. Solo uno tiene piso.")
    opciones_extra = []
    if binoculares > 0:
        opciones_extra.append("'usar binoculares'")
    if saltos > 0:
        opciones_extra.append("'usar salto'")
    if opciones_extra:
        print(f"Tienes disponibles: {', '.join(opciones_extra)}.")

    eleccion = input(f"Â¿CuÃ¡l pozo eliges? (1 a {cantidad_de_pozos}): ")

    # Usar binoculares
    if eleccion.lower() == "usar binoculares" and binoculares > 0:
        print(f"ğŸ‘ï¸â€ğŸ—¨ï¸ Usaste los binoculares... el pozo seguro es el nÃºmero {pozo_seguro}.")
        binoculares -= 1
        eleccion = input("Ahora elige el pozo correcto: ")

    # Usar salto de nivel
    if eleccion.lower() == "usar salto" and saltos > 0:
        print("ğŸ¦˜ Usaste salto de nivel. Â¡Saltas este nivel sin riesgo!")
        saltos -= 1
        victorias += 1
        monedas_ganadas = nivel * 10
        monedas += monedas_ganadas
        print(f"ğŸ’° Ganaste {monedas_ganadas} monedas. Total: {monedas}")
        nivel += 1
        # Ofrecer tienda despuÃ©s de usar salto
        if monedas >= 100:
            print("\nğŸ›ï¸ Bienvenido a la tienda:")
            print("1. Comprar vida (100 monedas)")
            print("2. Comprar binoculares (150 monedas)")
            if nivel >= 5:
                print("3. Comprar salto de nivel (300 monedas)")
                print("4. No comprar nada")
            else:
                print("3. No comprar nada")
            opcion_tienda = input("Â¿QuÃ© deseas comprar? ")

            if opcion_tienda == "1" and monedas >= 100:
                vidas += 1
                monedas -= 100
                print("â¤ï¸ Compraste una vida. Total de vidas:", vidas)
            elif opcion_tienda == "2" and monedas >= 150:
                binoculares += 1
                monedas -= 150
                print("ğŸ”­ Compraste binoculares. Ahora tienes:", binoculares)
            elif opcion_tienda == "3" and nivel >= 5 and monedas >= 300:
                saltos += 1
                monedas -= 300
                print("ğŸ¦˜ Compraste salto de nivel. Ahora tienes:", saltos)
            elif opcion_tienda in ["3", "4"] or opcion_tienda == "3" and nivel < 5:
                print("ğŸšª Saliste de la tienda.")
            else:
                print("âŒ No tienes suficientes monedas o opciÃ³n invÃ¡lida.")
        continue  # Salto usado, saltar a siguiente nivel

    # Elegir pozo normalmente
    if eleccion == str(pozo_seguro):
        print("âœ… Â¡Sobreviviste! Subes de nivel.")
        victorias += 1
        monedas_ganadas = nivel * 10
        monedas += monedas_ganadas
        print(f"ğŸ’° Ganaste {monedas_ganadas} monedas. Total: {monedas}")
        nivel += 1

        # Ofrecer la tienda despuÃ©s de ganar el nivel
        if monedas >= 100:
            print("\nğŸ›ï¸ Bienvenido a la tienda:")
            print("1. Comprar vida (100 monedas)")
            print("2. Comprar binoculares (150 monedas)")
